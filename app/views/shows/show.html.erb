  <h1><%= @show.name%></h1>
    <%= form_with model: @view do |f| %>
        <%= f.select(:status, ["Not Watching", "Watching", "Going to watch", "Stopped Watching"], selected: @show.views.map{|view| view.status if view.user_id == session[:user_id]} )%>
        <%= f.hidden_field :show_id, value: "#{@show.id}" %>
        <%= f.hidden_field :user_id, value: "#{session[:user_id]}" %>
        <%= f.submit "Confirm" %>
    <% end %>
  <p><%= @show.overview %></p>
    <p>Number of seasons: <%= @show.num_of_seasons %></p>
    <p>Rating: <%= @show.vote_avg %></p>
<ul>
<% @seasons.each do |season| %>
    <li><%= link_to season.name, season_path(season) %></li>
    <p>Number of episodes: <%= season.episode_count %></p>


    <% if @view.status == "Watching" || @view.status == "Stopped Watching" %>
        <%= form_with model: @watch do |f| %>
            <%= f.collection_check_boxes(:episode_ids, season.episodes, :id, :name, selected: @show.views.map{|view| view.episodes_watched if view.user_id == session[:user_id]} )  do |b| %>
            <span>
                <%= b.check_box %>
                <%= link_to b.label, episode_path(b.value) %><br>
            </span>   
            <% end %>
            <%= f.submit "Save Information" %>
        <% end %>
    <% else%>
        <% season.episodes.each do |episode| %>
            <p><%= link_to episode.name, episode_path(episode) %></p>
        <% end %>
    <% end %>
<% end %>
</ul>
